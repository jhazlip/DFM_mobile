<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		
		
		<link rel="stylesheet" type="text/css" media="all" href="css/dfm_mobile_styles.css">	<!-- dfm_mobile css -->
		<link rel="stylesheet" type="text/css" media="all" href="css/custom.css">				<!-- specific to this project -->
		<script type="text/javascript" src="dfm_mobile.js"></script>
		<script src="JSXCompressor/jsxcompressor.min.js" type="text/javascript"></script>		<!-- uncompresses json - wont need once NGPS feed done -->
		<script src="http://sandbox.dailyme.com/rmv2/js/recommender.js"></script>				<!-- newstogram -->
		
		<style type="text/css"></style>
		
		
		<script>
		//content:"";
			document.addEventListener('DOMContentLoaded', function (e) { pageloaded(); }, false);
			var xtesting = 0;
			var xInterface;
			
			var xFeedList = new Array();			//property list of all sections and their feeds
			var activeSection 	= 0;				//the current section number (in xFeedList array) - pointer
			var StoryList = new Array();			//array with all current section stories
			var activeStory		= 0;				//the current story   number (in StoryList array) - pointer DO WE NEED????
			var StoryContent = new Array();			//array with all current stories content
			var propertyTitle = '';
			var propertyImage = '';
			var backgroundsplash = '';
			var AppleAppID;
			var topDomain;
			
			function pageloaded() {
				//xInterface = new Interface( 'test', {transition: 'fade'});
				xInterface = new Interface( '' );	//this shows nothing but initiates the class

				//once interface is loaded we:
				//	1. load local content
				loadPropertyData();			//eventually once this is loading external content, it will need other things to wait until it is done

				//	2. build the sections menu window
				renderSectionsWindow();

				//-----------------------------------------------------launch environment
				preloadimages([ propertyImage ]).done(function(images){
					//when images are done loading:
					xInterface.showWindow( 'splash', {transition: 'fade'} );
					setTimeout(function() { loadNewSection(); }, 1500);

					//alert(images.length) //alerts 3//alert(images[0].src+" "+images[0].width) //alerts '1.gif 220'
				});
				//http://extras.denverpost.com/media/MRSS/Breaking_News_230605.xml
				
				//----------------------add the app checker for iOS (should be moved to dfm_mobile and only run if iOS) 
				//<meta name="apple-itunes-app" content="app-id=375264133">
				var viewPortTag=document.createElement('meta');
				//viewPortTag.id="viewport";
				viewPortTag.name = "apple-itunes-app";
				viewPortTag.content = "app-id="+ AppleAppID;		//375264133
				document.getElementsByTagName('head')[0].appendChild(viewPortTag);
				//----------------------add the app checker for iOS (should be moved to dfm_mobile and only run if iOS) (END)
				
				
			}
			//xInterface.removeLoaderInWindow('home');//xInterface.putLoaderInWindow( 'home' );//
			
		</script>
		
		<title>Denver Post</title>
		<!-- 
		<script src="iscroll.js" type="text/javascript"></script>
		-->
		<script src="universal.js" type="text/javascript"></script>
	</head>
<body>

<div id="dfm_mobile" >
	
	<div id="splash" >
		<div class="content" >
			<div style="position:absolute;background-color:none;width:100%;height:100%;top:0%;background-image:url(denverpostsplash.gif);background-size: contain;background-repeat:no-repeat;background-position:center;background-color:#0079c2;"></div>
		</div>
	</div><!-- /splash -->
	
	
	<div id="home" >
		<div class="toolbar darkblue">
			<!-- ALL buttons first -->
			<div class="sm_but_icon section_sm_w left" onclick="showSectionsWindow();"></div>
			<div class="sm_but_icon settings_sm_w " onclick="showPhotoGallery(); //xInterface.showWindow( 'gallery_window', { transition: 'fade', overlay:1 });"></div>
			
			<!-- then add title -->
			<h1><img src="images/denverpost/denver_logo.png" width="200" alt="Denver Logo" style="margin-top:5px;margin-left:-5px;"/></h1>
		</div>
		<div class="content belowtoolbar " style="background-color:#333;">
			<div id="home_section_list" class="scroller full custom"></div>
		</div>
	</div><!-- /home -->
	
	<div id="story_window" >
		<div class="content " style="background-color:#FFF;">
			
			<div id="story_container" class="scroller "></div>
		</div>
	</div><!-- /story_window -->
	
	<div id="gallery_window" >
		<div class="content " style="background-color:#000;">
			
		</div>
	</div><!-- /gallery_window -->
	
	
	<div id="share_window">
		<div class="content alertwindow overlay" style="">
			<div class="close" onclick="xInterface.closeActiveWindow();"><img src="css/close_pop.png" class="btn_close" title="Close Window" style="float: right;margin: -10px -10px 0 0;" /></div>
			<div style="position:absolute;top:20px;left:20px;right:20px;margin:auto;text-align:center;border:1px solid #333;">
				<div style="position:relative;margin:10px;width:200px;display:inline-block;"  ontouchstart="xActiveTouch = 1;" ontouchmove="xActiveTouch = 0;" onclick="event.returnValue=false;if (xActiveTouch) { alert('234'); }">
					<div class="list_image_title" style="margin:5px 0px 0px 0px;width:100%;color:#333;">Sharing alert window will contain buttons for social sharing sites such as Facebook and twitter.</div>
				</div>
			</div>
		</div>
	</div><!-- /share_window -->
	
	<div id="sections_window" style="width:300px;border-right:1px solid #000;">
			<div class="toolbar darkdarkblue">
				<!-- ALL buttons first -->
				<div class="sm_but_icon leftarroww left"  onclick="xInterface.closeActiveWindow();"></div>
				<div class="sm_but_icon settingsw invisible"></div><!-- center title by having same amount of buttons on each side. This one is on right (default) -->
				<!-- then add title -->
				<h1>SECTIONS</h1>
			</div>

			<div class="content belowtoolbar black overlay" style="">
				<div id="sections_container" class="scroller full dark"></div>
			</div>

	</div><!-- /sections_window -->
	
	<div id="settings_window">
		<div class="content alertwindow overlay" style="">
			<div class="close" onclick="xInterface.closeActiveWindow();"><img src="css/close_pop.png" class="btn_close" title="Close Window" style="float: right;margin: -10px -10px 0 0;" /></div>
			<div style="position:absolute;top:20px;left:20px;right:20px;margin:auto;text-align:center;border:1px solid #333;">
				<div style="position:relative;margin:10px;width:200px;display:inline-block;"  ontouchstart="xActiveTouch = 1;" ontouchmove="xActiveTouch = 0;" onclick="event.returnValue=false;if (xActiveTouch) { alert('234'); }">
					<div class="list_image_title" style="margin:5px 0px 0px 0px;width:100%;color:#333;">Settings window will contain features such as 'View Desktop Version', change article text size, etc.</div>
				</div>
			</div>
		</div>
	</div><!-- /settings_window -->
	
</div><!-- /dfm_mobile -->

</body>
</html>
